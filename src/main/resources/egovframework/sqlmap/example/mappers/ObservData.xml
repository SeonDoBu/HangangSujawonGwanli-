<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.example.sample.service.impl.ObservDataMapper">
<!-- 	<resultMap type="egovframework.example.sample.dto.ObservData" id="obsData">
		<result property="sluice_id" column="sluice_id"/>
	</resultMap>
	 -->
	<select id="observCount" resultType="int">
		SELECT COUNT(*)
		FROM Observ_data
	</select>

	<select id="observDataList" resultType="ObservData" parameterType="ObservData">
		SELECT b.*
		from			 
			(select 	ROW_NUMBER() OVER (ORDER BY sluice_id) rn , a.*
		from	
		(SELECT *
		from observ_data 
		where sluice_id = #{sluice_id}
		and type= #{type}) a

		 ) b
		 where rn BETWEEN #{start} and #{end}
		
	</select>
	
	<select id="observdataDetail" resultType="ObservData" parameterType="ObservData">
			SELECT *
			FROM observ_data
			where sluice_id = #{sluice_id}
			and type = #{type}
			and data_ymd = #{data_ymd}
	</select>
	<update id="updateObserv" parameterType="ObservData">
	UPDATE  observ_data 
	SET
	value00	= #{value00},
	value01	= #{value01},
	value02	= #{value02},
	value03	= #{value03},
	value04	= #{value04},
	value05	= #{value05},
	value06	= #{value06},
	value07	= #{value07},
	value08	= #{value08},
	value09	= #{value09},
	value10	= #{value10},
	value11	= #{value11},
	value12	= #{value12},
	value13	= #{value13},
	value14	= #{value14},
	value15	= #{value15},
	value16	= #{value16},
	value17	= #{value17},
	value18	= #{value18},
	value19	= #{value19},
	value20	= #{value20},
	value21	= #{value21},
	value22	= #{value22},
	value23	= #{value23}
	where sluice_id = #{sluice_id}
	and   type = #{type}
	and   data_ymd = #{data_ymd}
	</update>


</mapper>